<html>
	<head>
		<title>My first Three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<div id="fpsmeter"></div>

		<script src="node_modules/three/three.min.js"></script>
		<script src="fps.js"></script>
		<script>
		var scene  = new THREE.Scene(),
			camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100),
			renderer = new THREE.WebGLRenderer();

		renderer.setSize(window.innerWidth, window.innerHeight);
		document.body.appendChild(renderer.domElement);

		var geometry = new THREE.BoxGeometry(1, 1, 1),
			material = new THREE.MeshBasicMaterial({ color : 0x00ff00 }),
			cube     = new THREE.Mesh(geometry, material);

		scene.add(cube);

		camera.position.z = 5;


		function timestamp () {
			return window.performance && window.performance.now ? window.performance.now() : new Date().getTime();
		}

		function update () {
			cube.rotation.x += 0.04;
			cube.rotation.y += 0.04;
		}

		var	dt 	 = 0,
			step = 1/60,
			last     = timestamp(),
			fpsmeter = new FPSMeter(document.getElementById('fpsmeter'), { decimals: 0, graph: true, theme: 'dark', left: '5px' });

		function frame () {
			fpsmeter.tickStart();
			now  = timestamp();
			dt   = dt + Math.min(1, (now - last) / 1000);
			while (dt > step) {
				dt = dt - step;
				update(step);
				fpsmeter.tick();
			}
			render(dt);
			last = now;
			requestAnimationFrame(frame);
		}

		function render () {
			/*update();
			requestAnimationFrame(render);*/
			renderer.render(scene, camera);
		}
		frame();


		</script>
	</body>
</html>